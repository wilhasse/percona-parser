# Repository Guidelines

## Project Structure & Module Organization
- Root `*.cc`/`*.h` files implement the core parser, decryptor, and decompressor (for example, `ib_parser.cc`, `parser.cc`, `decompress.cc`, `decrypt.cc`).
- `lib/` contains the C API wrapper (`ibd_reader_api`) for external integrations.
- `docs/` hosts build, architecture, API, and testing documentation.
- `examples/` provides language bindings and sample usage.
- `tests/` holds shell test scripts and fixtures; `build/` is generated by CMake.

## Build, Test, and Development Commands
```bash
# Configure and build
mkdir -p build && cd build && cmake .. && make -j4

# Debug build
cmake .. -DCMAKE_BUILD_TYPE=Debug

# Run the CLI (shows usage)
./build/ib_parser
```
```bash
# Tests (MySQL must be running)
./tests/test_compressed.sh
./tests/test_import_only.sh
```
See `CLAUDE.md` and `docs/Building.md` for detailed setup and dependencies.

## Coding Style & Naming Conventions
- C++17 codebase; keep 4-space indentation and braces on the same line.
- Follow existing naming patterns: `.cc`/`.h` files, `CamelCase` structs, `snake_case` functions, and `g_` prefix for globals.
- No formatter or linter is enforced; match surrounding style when editing.

## Testing Guidelines
- Tests are bash scripts and should be run from the repo root.
- `test_import_only.sh` intentionally demonstrates the expected MySQL import failure due to COMPRESSED metadata retention.
- If tests leave MySQL in a bad state, cleanup steps are documented in `docs/Testing.md`.

## Commit & Pull Request Guidelines
- Commit messages are short, imperative, sentence case (e.g., "Fix metadata page handling"); avoid prefixes.
- Before committing, build and run both test scripts.
- PRs should include a concise summary, test results, and documentation updates for API/CLI changes; link relevant issues when available.

## Dependencies & Configuration
- Requires a Percona Server source tree at `../percona-server/` with partial builds (see `docs/Building.md`).
- RapidJSON headers should be available at `~/rapidjson/include`.
- System dependencies include OpenSSL and zlib development libraries.
